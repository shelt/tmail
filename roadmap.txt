##### DEFINITIONS #####
INBOX:
A collection of messages that were addressed to a certain account.
Messages are stored collectively and have a field for which account they were sent to.

OUTBOX:
A collection of messages that were sent by a certain account *from this client*.

##### Code Modules #####
retrieve: code related to retrieving data from mailservers
send:     code related to sending data to a MTA
parse:    code related to extracting meaningful data from raw email data
httpd:    code related to serving meaningful data to users via webserver
database: code related to storing and retrieving data from the database. SQL queries should only be executed here.



##### Database Model #####

Accounts
(id INTEGER PRIMARY KEY, address TEXT UNIQUE, in_username TEXT, in_host TEXT, in_port INT,
                                              out_username TEXT, out_host TEXT, out_port INT)

Inbox
(id TEXT UNIQUE, account INTEGER, data TEXT)


##### TODO #####
Add sent messages to outbox
Implement "thread" page
Mark messages as read when their thread page is viewed
Post requests: Refresh, Send-message
Refresh feature (and password caching for it)

## MISC ##
DB UNIQUE errors should make themselves known

cache pass once entered for use with subsequent refreshes
password input from browser / better password handling (no getpass)
html-to-plaintext messages for those with no plain counterpart
send confirmation dialog
spam header detection
cc bcc
add sent mail to Outbox table


##### NOTES #####
.decode() before displaying?
will nonstandard headers like thread-index be neccesary to parse in order to represent threads?


#### web ####
PAGES
THREADS: all messages which have not been replied to by another message.
INBOX: all in messages listed by order of date
OUTBOX: all out messages listed by order of date
Selecting a message will show a thread. If the message is a reply to another message,
that message will appear below it. If the message has been replied to by another message,
that message, links to that message will appear.
If the message has been replied to (i.e. it is the in-reply-to field of some other message(s)),
links to those messages will show above the main message in bar type links.

##### Dynamic elements #####

